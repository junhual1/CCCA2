{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.fill.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.error.to-string.js\");\n/*\n * heatmap.js v2.0.5 | JavaScript Heatmap Library\n *\n * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.\n * Dual licensed under MIT and Beerware license \n *\n * :: 2016-09-05 01:16\n */\n;\n(function (name, context, factory) {\n  // Supports UMD. AMD, CommonJS/Node.js and browser context\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else if (typeof define === \"function\" && define.amd) {\n    define(factory);\n  } else {\n    context[name] = factory();\n  }\n})(\"h337\", this, function () {\n  // Heatmap Config stores default values and will be merged with instance config\n  var HeatmapConfig = {\n    defaultRadius: 40,\n    defaultRenderer: 'canvas2d',\n    defaultGradient: {\n      0.25: \"rgb(0,0,255)\",\n      0.55: \"rgb(0,255,0)\",\n      0.85: \"yellow\",\n      1.0: \"rgb(255,0,0)\"\n    },\n    defaultMaxOpacity: 1,\n    defaultMinOpacity: 0,\n    defaultBlur: .85,\n    defaultXField: 'x',\n    defaultYField: 'y',\n    defaultValueField: 'value',\n    plugins: {}\n  };\n  var Store = function StoreClosure() {\n    var Store = function Store(config) {\n      this._coordinator = {};\n      this._data = [];\n      this._radi = [];\n      this._min = 10;\n      this._max = 1;\n      this._xField = config['xField'] || config.defaultXField;\n      this._yField = config['yField'] || config.defaultYField;\n      this._valueField = config['valueField'] || config.defaultValueField;\n      if (config[\"radius\"]) {\n        this._cfgRadius = config[\"radius\"];\n      }\n    };\n    var defaultRadius = HeatmapConfig.defaultRadius;\n    Store.prototype = {\n      // when forceRender = false -> called from setData, omits renderall event\n      _organiseData: function _organiseData(dataPoint, forceRender) {\n        var x = dataPoint[this._xField];\n        var y = dataPoint[this._yField];\n        var radi = this._radi;\n        var store = this._data;\n        var max = this._max;\n        var min = this._min;\n        var value = dataPoint[this._valueField] || 1;\n        var radius = dataPoint.radius || this._cfgRadius || defaultRadius;\n        if (!store[x]) {\n          store[x] = [];\n          radi[x] = [];\n        }\n        if (!store[x][y]) {\n          store[x][y] = value;\n          radi[x][y] = radius;\n        } else {\n          store[x][y] += value;\n        }\n        var storedVal = store[x][y];\n        if (storedVal > max) {\n          if (!forceRender) {\n            this._max = storedVal;\n          } else {\n            this.setDataMax(storedVal);\n          }\n          return false;\n        } else if (storedVal < min) {\n          if (!forceRender) {\n            this._min = storedVal;\n          } else {\n            this.setDataMin(storedVal);\n          }\n          return false;\n        } else {\n          return {\n            x: x,\n            y: y,\n            value: value,\n            radius: radius,\n            min: min,\n            max: max\n          };\n        }\n      },\n      _unOrganizeData: function _unOrganizeData() {\n        var unorganizedData = [];\n        var data = this._data;\n        var radi = this._radi;\n        for (var x in data) {\n          for (var y in data[x]) {\n            unorganizedData.push({\n              x: x,\n              y: y,\n              radius: radi[x][y],\n              value: data[x][y]\n            });\n          }\n        }\n        return {\n          min: this._min,\n          max: this._max,\n          data: unorganizedData\n        };\n      },\n      _onExtremaChange: function _onExtremaChange() {\n        this._coordinator.emit('extremachange', {\n          min: this._min,\n          max: this._max\n        });\n      },\n      addData: function addData() {\n        if (arguments[0].length > 0) {\n          var dataArr = arguments[0];\n          var dataLen = dataArr.length;\n          while (dataLen--) {\n            this.addData.call(this, dataArr[dataLen]);\n          }\n        } else {\n          // add to store  \n          var organisedEntry = this._organiseData(arguments[0], true);\n          if (organisedEntry) {\n            // if it's the first datapoint initialize the extremas with it\n            if (this._data.length === 0) {\n              this._min = this._max = organisedEntry.value;\n            }\n            this._coordinator.emit('renderpartial', {\n              min: this._min,\n              max: this._max,\n              data: [organisedEntry]\n            });\n          }\n        }\n        return this;\n      },\n      setData: function setData(data) {\n        var dataPoints = data.data;\n        var pointsLen = dataPoints.length;\n\n        // reset data arrays\n        this._data = [];\n        this._radi = [];\n        for (var i = 0; i < pointsLen; i++) {\n          this._organiseData(dataPoints[i], false);\n        }\n        this._max = data.max;\n        this._min = data.min || 0;\n        this._onExtremaChange();\n        this._coordinator.emit('renderall', this._getInternalData());\n        return this;\n      },\n      removeData: function removeData() {\n        // TODO: implement\n      },\n      setDataMax: function setDataMax(max) {\n        this._max = max;\n        this._onExtremaChange();\n        this._coordinator.emit('renderall', this._getInternalData());\n        return this;\n      },\n      setDataMin: function setDataMin(min) {\n        this._min = min;\n        this._onExtremaChange();\n        this._coordinator.emit('renderall', this._getInternalData());\n        return this;\n      },\n      setCoordinator: function setCoordinator(coordinator) {\n        this._coordinator = coordinator;\n      },\n      _getInternalData: function _getInternalData() {\n        return {\n          max: this._max,\n          min: this._min,\n          data: this._data,\n          radi: this._radi\n        };\n      },\n      getData: function getData() {\n        return this._unOrganizeData();\n      } /*,\n          TODO: rethink.\n        getValueAt: function(point) {\n         var value;\n         var radius = 100;\n         var x = point.x;\n         var y = point.y;\n         var data = this._data;\n          if (data[x] && data[x][y]) {\n           return data[x][y];\n         } else {\n           var values = [];\n           // radial search for datapoints based on default radius\n           for(var distance = 1; distance < radius; distance++) {\n             var neighbors = distance * 2 +1;\n             var startX = x - distance;\n             var startY = y - distance;\n              for(var i = 0; i < neighbors; i++) {\n               for (var o = 0; o < neighbors; o++) {\n                 if ((i == 0 || i == neighbors-1) || (o == 0 || o == neighbors-1)) {\n                   if (data[startY+i] && data[startY+i][startX+o]) {\n                     values.push(data[startY+i][startX+o]);\n                   }\n                 } else {\n                   continue;\n                 } \n               }\n             }\n           }\n           if (values.length > 0) {\n             return Math.max.apply(Math, values);\n           }\n         }\n         return false;\n        }*/\n    };\n\n    return Store;\n  }();\n  var Canvas2dRenderer = function Canvas2dRendererClosure() {\n    var _getColorPalette = function _getColorPalette(config) {\n      var gradientConfig = config.gradient || config.defaultGradient;\n      var paletteCanvas = document.createElement('canvas');\n      var paletteCtx = paletteCanvas.getContext('2d');\n      paletteCanvas.width = 256;\n      paletteCanvas.height = 1;\n      var gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\n      for (var key in gradientConfig) {\n        gradient.addColorStop(key, gradientConfig[key]);\n      }\n      paletteCtx.fillStyle = gradient;\n      paletteCtx.fillRect(0, 0, 256, 1);\n      return paletteCtx.getImageData(0, 0, 256, 1).data;\n    };\n    var _getPointTemplate = function _getPointTemplate(radius, blurFactor) {\n      var tplCanvas = document.createElement('canvas');\n      var tplCtx = tplCanvas.getContext('2d');\n      var x = radius;\n      var y = radius;\n      tplCanvas.width = tplCanvas.height = radius * 2;\n      if (blurFactor == 1) {\n        tplCtx.beginPath();\n        tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\n        tplCtx.fillStyle = 'rgba(0,0,0,1)';\n        tplCtx.fill();\n      } else {\n        var gradient = tplCtx.createRadialGradient(x, y, radius * blurFactor, x, y, radius);\n        gradient.addColorStop(0, 'rgba(0,0,0,1)');\n        gradient.addColorStop(1, 'rgba(0,0,0,0)');\n        tplCtx.fillStyle = gradient;\n        tplCtx.fillRect(0, 0, 2 * radius, 2 * radius);\n      }\n      return tplCanvas;\n    };\n    var _prepareData = function _prepareData(data) {\n      var renderData = [];\n      var min = data.min;\n      var max = data.max;\n      var radi = data.radi;\n      var data = data.data;\n      var xValues = Object.keys(data);\n      var xValuesLen = xValues.length;\n      while (xValuesLen--) {\n        var xValue = xValues[xValuesLen];\n        var yValues = Object.keys(data[xValue]);\n        var yValuesLen = yValues.length;\n        while (yValuesLen--) {\n          var yValue = yValues[yValuesLen];\n          var value = data[xValue][yValue];\n          var radius = radi[xValue][yValue];\n          renderData.push({\n            x: xValue,\n            y: yValue,\n            value: value,\n            radius: radius\n          });\n        }\n      }\n      return {\n        min: min,\n        max: max,\n        data: renderData\n      };\n    };\n    function Canvas2dRenderer(config) {\n      var container = config.container;\n      var shadowCanvas = this.shadowCanvas = document.createElement('canvas');\n      var canvas = this.canvas = config.canvas || document.createElement('canvas');\n      var renderBoundaries = this._renderBoundaries = [10000, 10000, 0, 0];\n      var computed = getComputedStyle(config.container) || {};\n      canvas.className = 'heatmap-canvas';\n      this._width = canvas.width = shadowCanvas.width = config.width || +computed.width.replace(/px/, '');\n      this._height = canvas.height = shadowCanvas.height = config.height || +computed.height.replace(/px/, '');\n      this.shadowCtx = shadowCanvas.getContext('2d');\n      this.ctx = canvas.getContext('2d');\n\n      // @TODO:\n      // conditional wrapper\n\n      canvas.style.cssText = shadowCanvas.style.cssText = 'position:absolute;left:0;top:0;';\n      container.style.position = 'relative';\n      container.appendChild(canvas);\n      this._palette = _getColorPalette(config);\n      this._templates = {};\n      this._setStyles(config);\n    }\n    ;\n    Canvas2dRenderer.prototype = {\n      renderPartial: function renderPartial(data) {\n        if (data.data.length > 0) {\n          this._drawAlpha(data);\n          this._colorize();\n        }\n      },\n      renderAll: function renderAll(data) {\n        // reset render boundaries\n        this._clear();\n        if (data.data.length > 0) {\n          this._drawAlpha(_prepareData(data));\n          this._colorize();\n        }\n      },\n      _updateGradient: function _updateGradient(config) {\n        this._palette = _getColorPalette(config);\n      },\n      updateConfig: function updateConfig(config) {\n        if (config['gradient']) {\n          this._updateGradient(config);\n        }\n        this._setStyles(config);\n      },\n      setDimensions: function setDimensions(width, height) {\n        this._width = width;\n        this._height = height;\n        this.canvas.width = this.shadowCanvas.width = width;\n        this.canvas.height = this.shadowCanvas.height = height;\n      },\n      _clear: function _clear() {\n        this.shadowCtx.clearRect(0, 0, this._width, this._height);\n        this.ctx.clearRect(0, 0, this._width, this._height);\n      },\n      _setStyles: function _setStyles(config) {\n        this._blur = config.blur == 0 ? 0 : config.blur || config.defaultBlur;\n        if (config.backgroundColor) {\n          this.canvas.style.backgroundColor = config.backgroundColor;\n        }\n        this._width = this.canvas.width = this.shadowCanvas.width = config.width || this._width;\n        this._height = this.canvas.height = this.shadowCanvas.height = config.height || this._height;\n        this._opacity = (config.opacity || 0) * 255;\n        this._maxOpacity = (config.maxOpacity || config.defaultMaxOpacity) * 255;\n        this._minOpacity = (config.minOpacity || config.defaultMinOpacity) * 255;\n        this._useGradientOpacity = !!config.useGradientOpacity;\n      },\n      _drawAlpha: function _drawAlpha(data) {\n        var min = this._min = data.min;\n        var max = this._max = data.max;\n        var data = data.data || [];\n        var dataLen = data.length;\n        // on a point basis?\n        var blur = 1 - this._blur;\n        while (dataLen--) {\n          var point = data[dataLen];\n          var x = point.x;\n          var y = point.y;\n          var radius = point.radius;\n          // if value is bigger than max\n          // use max as value\n          var value = Math.min(point.value, max);\n          var rectX = x - radius;\n          var rectY = y - radius;\n          var shadowCtx = this.shadowCtx;\n          var tpl;\n          if (!this._templates[radius]) {\n            this._templates[radius] = tpl = _getPointTemplate(radius, blur);\n          } else {\n            tpl = this._templates[radius];\n          }\n          // value from minimum / value range\n          // => [0, 1]\n          var templateAlpha = (value - min) / (max - min);\n          // this fixes #176: small values are not visible because globalAlpha < .01 cannot be read from imageData\n          shadowCtx.globalAlpha = templateAlpha < .01 ? .01 : templateAlpha;\n          shadowCtx.drawImage(tpl, rectX, rectY);\n\n          // update renderBoundaries\n          if (rectX < this._renderBoundaries[0]) {\n            this._renderBoundaries[0] = rectX;\n          }\n          if (rectY < this._renderBoundaries[1]) {\n            this._renderBoundaries[1] = rectY;\n          }\n          if (rectX + 2 * radius > this._renderBoundaries[2]) {\n            this._renderBoundaries[2] = rectX + 2 * radius;\n          }\n          if (rectY + 2 * radius > this._renderBoundaries[3]) {\n            this._renderBoundaries[3] = rectY + 2 * radius;\n          }\n        }\n      },\n      _colorize: function _colorize() {\n        var x = this._renderBoundaries[0];\n        var y = this._renderBoundaries[1];\n        var width = this._renderBoundaries[2] - x;\n        var height = this._renderBoundaries[3] - y;\n        var maxWidth = this._width;\n        var maxHeight = this._height;\n        var opacity = this._opacity;\n        var maxOpacity = this._maxOpacity;\n        var minOpacity = this._minOpacity;\n        var useGradientOpacity = this._useGradientOpacity;\n        if (x < 0) {\n          x = 0;\n        }\n        if (y < 0) {\n          y = 0;\n        }\n        if (x + width > maxWidth) {\n          width = maxWidth - x;\n        }\n        if (y + height > maxHeight) {\n          height = maxHeight - y;\n        }\n        var img = this.shadowCtx.getImageData(x, y, width, height);\n        var imgData = img.data;\n        var len = imgData.length;\n        var palette = this._palette;\n        for (var i = 3; i < len; i += 4) {\n          var alpha = imgData[i];\n          var offset = alpha * 4;\n          if (!offset) {\n            continue;\n          }\n          var finalAlpha;\n          if (opacity > 0) {\n            finalAlpha = opacity;\n          } else {\n            if (alpha < maxOpacity) {\n              if (alpha < minOpacity) {\n                finalAlpha = minOpacity;\n              } else {\n                finalAlpha = alpha;\n              }\n            } else {\n              finalAlpha = maxOpacity;\n            }\n          }\n          imgData[i - 3] = palette[offset];\n          imgData[i - 2] = palette[offset + 1];\n          imgData[i - 1] = palette[offset + 2];\n          imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\n        }\n        img.data = imgData;\n        this.ctx.putImageData(img, x, y);\n        this._renderBoundaries = [1000, 1000, 0, 0];\n      },\n      getValueAt: function getValueAt(point) {\n        var value;\n        var shadowCtx = this.shadowCtx;\n        var img = shadowCtx.getImageData(point.x, point.y, 1, 1);\n        var data = img.data[3];\n        var max = this._max;\n        var min = this._min;\n        value = Math.abs(max - min) * (data / 255) >> 0;\n        return value;\n      },\n      getDataURL: function getDataURL() {\n        return this.canvas.toDataURL();\n      }\n    };\n    return Canvas2dRenderer;\n  }();\n  var Renderer = function RendererClosure() {\n    var rendererFn = false;\n    if (HeatmapConfig['defaultRenderer'] === 'canvas2d') {\n      rendererFn = Canvas2dRenderer;\n    }\n    return rendererFn;\n  }();\n  var Util = {\n    merge: function merge() {\n      var merged = {};\n      var argsLen = arguments.length;\n      for (var i = 0; i < argsLen; i++) {\n        var obj = arguments[i];\n        for (var key in obj) {\n          merged[key] = obj[key];\n        }\n      }\n      return merged;\n    }\n  };\n  // Heatmap Constructor\n  var Heatmap = function HeatmapClosure() {\n    var Coordinator = function CoordinatorClosure() {\n      function Coordinator() {\n        this.cStore = {};\n      }\n      ;\n      Coordinator.prototype = {\n        on: function on(evtName, callback, scope) {\n          var cStore = this.cStore;\n          if (!cStore[evtName]) {\n            cStore[evtName] = [];\n          }\n          cStore[evtName].push(function (data) {\n            return callback.call(scope, data);\n          });\n        },\n        emit: function emit(evtName, data) {\n          var cStore = this.cStore;\n          if (cStore[evtName]) {\n            var len = cStore[evtName].length;\n            for (var i = 0; i < len; i++) {\n              var callback = cStore[evtName][i];\n              callback(data);\n            }\n          }\n        }\n      };\n      return Coordinator;\n    }();\n    var _connect = function _connect(scope) {\n      var renderer = scope._renderer;\n      var coordinator = scope._coordinator;\n      var store = scope._store;\n      coordinator.on('renderpartial', renderer.renderPartial, renderer);\n      coordinator.on('renderall', renderer.renderAll, renderer);\n      coordinator.on('extremachange', function (data) {\n        scope._config.onExtremaChange && scope._config.onExtremaChange({\n          min: data.min,\n          max: data.max,\n          gradient: scope._config['gradient'] || scope._config['defaultGradient']\n        });\n      });\n      store.setCoordinator(coordinator);\n    };\n    function Heatmap() {\n      var config = this._config = Util.merge(HeatmapConfig, arguments[0] || {});\n      this._coordinator = new Coordinator();\n      if (config['plugin']) {\n        var pluginToLoad = config['plugin'];\n        if (!HeatmapConfig.plugins[pluginToLoad]) {\n          throw new Error('Plugin \\'' + pluginToLoad + '\\' not found. Maybe it was not registered.');\n        } else {\n          var plugin = HeatmapConfig.plugins[pluginToLoad];\n          // set plugin renderer and store\n          this._renderer = new plugin.renderer(config);\n          this._store = new plugin.store(config);\n        }\n      } else {\n        this._renderer = new Renderer(config);\n        this._store = new Store(config);\n      }\n      _connect(this);\n    }\n    ;\n\n    // @TODO:\n    // add API documentation\n    Heatmap.prototype = {\n      addData: function addData() {\n        this._store.addData.apply(this._store, arguments);\n        return this;\n      },\n      removeData: function removeData() {\n        this._store.removeData && this._store.removeData.apply(this._store, arguments);\n        return this;\n      },\n      setData: function setData() {\n        this._store.setData.apply(this._store, arguments);\n        return this;\n      },\n      setDataMax: function setDataMax() {\n        this._store.setDataMax.apply(this._store, arguments);\n        return this;\n      },\n      setDataMin: function setDataMin() {\n        this._store.setDataMin.apply(this._store, arguments);\n        return this;\n      },\n      configure: function configure(config) {\n        this._config = Util.merge(this._config, config);\n        this._renderer.updateConfig(this._config);\n        this._coordinator.emit('renderall', this._store._getInternalData());\n        return this;\n      },\n      repaint: function repaint() {\n        this._coordinator.emit('renderall', this._store._getInternalData());\n        return this;\n      },\n      getData: function getData() {\n        return this._store.getData();\n      },\n      getDataURL: function getDataURL() {\n        return this._renderer.getDataURL();\n      },\n      getValueAt: function getValueAt(point) {\n        if (this._store.getValueAt) {\n          return this._store.getValueAt(point);\n        } else if (this._renderer.getValueAt) {\n          return this._renderer.getValueAt(point);\n        } else {\n          return null;\n        }\n      }\n    };\n    return Heatmap;\n  }();\n\n  // core\n  var heatmapFactory = {\n    create: function create(config) {\n      return new Heatmap(config);\n    },\n    register: function register(pluginKey, plugin) {\n      HeatmapConfig.plugins[pluginKey] = plugin;\n    }\n  };\n  return heatmapFactory;\n});","map":{"version":3,"names":["name","context","factory","module","exports","define","amd","HeatmapConfig","defaultRadius","defaultRenderer","defaultGradient","defaultMaxOpacity","defaultMinOpacity","defaultBlur","defaultXField","defaultYField","defaultValueField","plugins","Store","StoreClosure","config","_coordinator","_data","_radi","_min","_max","_xField","_yField","_valueField","_cfgRadius","prototype","_organiseData","dataPoint","forceRender","x","y","radi","store","max","min","value","radius","storedVal","setDataMax","setDataMin","_unOrganizeData","unorganizedData","data","push","_onExtremaChange","emit","addData","arguments","length","dataArr","dataLen","call","organisedEntry","setData","dataPoints","pointsLen","i","_getInternalData","removeData","setCoordinator","coordinator","getData","Canvas2dRenderer","Canvas2dRendererClosure","_getColorPalette","gradientConfig","gradient","paletteCanvas","document","createElement","paletteCtx","getContext","width","height","createLinearGradient","key","addColorStop","fillStyle","fillRect","getImageData","_getPointTemplate","blurFactor","tplCanvas","tplCtx","beginPath","arc","Math","PI","fill","createRadialGradient","_prepareData","renderData","xValues","Object","keys","xValuesLen","xValue","yValues","yValuesLen","yValue","container","shadowCanvas","canvas","renderBoundaries","_renderBoundaries","computed","getComputedStyle","className","_width","replace","_height","shadowCtx","ctx","style","cssText","position","appendChild","_palette","_templates","_setStyles","renderPartial","_drawAlpha","_colorize","renderAll","_clear","_updateGradient","updateConfig","setDimensions","clearRect","_blur","blur","backgroundColor","_opacity","opacity","_maxOpacity","maxOpacity","_minOpacity","minOpacity","_useGradientOpacity","useGradientOpacity","point","rectX","rectY","tpl","templateAlpha","globalAlpha","drawImage","maxWidth","maxHeight","img","imgData","len","palette","alpha","offset","finalAlpha","putImageData","getValueAt","abs","getDataURL","toDataURL","Renderer","RendererClosure","rendererFn","Util","merge","merged","argsLen","obj","Heatmap","HeatmapClosure","Coordinator","CoordinatorClosure","cStore","on","evtName","callback","scope","_connect","renderer","_renderer","_store","_config","onExtremaChange","pluginToLoad","Error","plugin","apply","configure","repaint","heatmapFactory","create","register","pluginKey"],"sources":["/Users/eddiediedie/Desktop/CCC_A2/CCCA2/node_modules/heatmap.js/build/heatmap.js"],"sourcesContent":["/*\n * heatmap.js v2.0.5 | JavaScript Heatmap Library\n *\n * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.\n * Dual licensed under MIT and Beerware license \n *\n * :: 2016-09-05 01:16\n */\n;(function (name, context, factory) {\n\n  // Supports UMD. AMD, CommonJS/Node.js and browser context\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else if (typeof define === \"function\" && define.amd) {\n    define(factory);\n  } else {\n    context[name] = factory();\n  }\n\n})(\"h337\", this, function () {\n\n// Heatmap Config stores default values and will be merged with instance config\nvar HeatmapConfig = {\n  defaultRadius: 40,\n  defaultRenderer: 'canvas2d',\n  defaultGradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"},\n  defaultMaxOpacity: 1,\n  defaultMinOpacity: 0,\n  defaultBlur: .85,\n  defaultXField: 'x',\n  defaultYField: 'y',\n  defaultValueField: 'value', \n  plugins: {}\n};\nvar Store = (function StoreClosure() {\n\n  var Store = function Store(config) {\n    this._coordinator = {};\n    this._data = [];\n    this._radi = [];\n    this._min = 10;\n    this._max = 1;\n    this._xField = config['xField'] || config.defaultXField;\n    this._yField = config['yField'] || config.defaultYField;\n    this._valueField = config['valueField'] || config.defaultValueField;\n\n    if (config[\"radius\"]) {\n      this._cfgRadius = config[\"radius\"];\n    }\n  };\n\n  var defaultRadius = HeatmapConfig.defaultRadius;\n\n  Store.prototype = {\n    // when forceRender = false -> called from setData, omits renderall event\n    _organiseData: function(dataPoint, forceRender) {\n        var x = dataPoint[this._xField];\n        var y = dataPoint[this._yField];\n        var radi = this._radi;\n        var store = this._data;\n        var max = this._max;\n        var min = this._min;\n        var value = dataPoint[this._valueField] || 1;\n        var radius = dataPoint.radius || this._cfgRadius || defaultRadius;\n\n        if (!store[x]) {\n          store[x] = [];\n          radi[x] = [];\n        }\n\n        if (!store[x][y]) {\n          store[x][y] = value;\n          radi[x][y] = radius;\n        } else {\n          store[x][y] += value;\n        }\n        var storedVal = store[x][y];\n\n        if (storedVal > max) {\n          if (!forceRender) {\n            this._max = storedVal;\n          } else {\n            this.setDataMax(storedVal);\n          }\n          return false;\n        } else if (storedVal < min) {\n          if (!forceRender) {\n            this._min = storedVal;\n          } else {\n            this.setDataMin(storedVal);\n          }\n          return false;\n        } else {\n          return { \n            x: x, \n            y: y,\n            value: value, \n            radius: radius,\n            min: min,\n            max: max \n          };\n        }\n    },\n    _unOrganizeData: function() {\n      var unorganizedData = [];\n      var data = this._data;\n      var radi = this._radi;\n\n      for (var x in data) {\n        for (var y in data[x]) {\n\n          unorganizedData.push({\n            x: x,\n            y: y,\n            radius: radi[x][y],\n            value: data[x][y]\n          });\n\n        }\n      }\n      return {\n        min: this._min,\n        max: this._max,\n        data: unorganizedData\n      };\n    },\n    _onExtremaChange: function() {\n      this._coordinator.emit('extremachange', {\n        min: this._min,\n        max: this._max\n      });\n    },\n    addData: function() {\n      if (arguments[0].length > 0) {\n        var dataArr = arguments[0];\n        var dataLen = dataArr.length;\n        while (dataLen--) {\n          this.addData.call(this, dataArr[dataLen]);\n        }\n      } else {\n        // add to store  \n        var organisedEntry = this._organiseData(arguments[0], true);\n        if (organisedEntry) {\n          // if it's the first datapoint initialize the extremas with it\n          if (this._data.length === 0) {\n            this._min = this._max = organisedEntry.value;\n          }\n          this._coordinator.emit('renderpartial', {\n            min: this._min,\n            max: this._max,\n            data: [organisedEntry]\n          });\n        }\n      }\n      return this;\n    },\n    setData: function(data) {\n      var dataPoints = data.data;\n      var pointsLen = dataPoints.length;\n\n\n      // reset data arrays\n      this._data = [];\n      this._radi = [];\n\n      for(var i = 0; i < pointsLen; i++) {\n        this._organiseData(dataPoints[i], false);\n      }\n      this._max = data.max;\n      this._min = data.min || 0;\n      \n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    removeData: function() {\n      // TODO: implement\n    },\n    setDataMax: function(max) {\n      this._max = max;\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    setDataMin: function(min) {\n      this._min = min;\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    setCoordinator: function(coordinator) {\n      this._coordinator = coordinator;\n    },\n    _getInternalData: function() {\n      return { \n        max: this._max,\n        min: this._min, \n        data: this._data,\n        radi: this._radi \n      };\n    },\n    getData: function() {\n      return this._unOrganizeData();\n    }/*,\n\n      TODO: rethink.\n\n    getValueAt: function(point) {\n      var value;\n      var radius = 100;\n      var x = point.x;\n      var y = point.y;\n      var data = this._data;\n\n      if (data[x] && data[x][y]) {\n        return data[x][y];\n      } else {\n        var values = [];\n        // radial search for datapoints based on default radius\n        for(var distance = 1; distance < radius; distance++) {\n          var neighbors = distance * 2 +1;\n          var startX = x - distance;\n          var startY = y - distance;\n\n          for(var i = 0; i < neighbors; i++) {\n            for (var o = 0; o < neighbors; o++) {\n              if ((i == 0 || i == neighbors-1) || (o == 0 || o == neighbors-1)) {\n                if (data[startY+i] && data[startY+i][startX+o]) {\n                  values.push(data[startY+i][startX+o]);\n                }\n              } else {\n                continue;\n              } \n            }\n          }\n        }\n        if (values.length > 0) {\n          return Math.max.apply(Math, values);\n        }\n      }\n      return false;\n    }*/\n  };\n\n\n  return Store;\n})();\n\nvar Canvas2dRenderer = (function Canvas2dRendererClosure() {\n\n  var _getColorPalette = function(config) {\n    var gradientConfig = config.gradient || config.defaultGradient;\n    var paletteCanvas = document.createElement('canvas');\n    var paletteCtx = paletteCanvas.getContext('2d');\n\n    paletteCanvas.width = 256;\n    paletteCanvas.height = 1;\n\n    var gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\n    for (var key in gradientConfig) {\n      gradient.addColorStop(key, gradientConfig[key]);\n    }\n\n    paletteCtx.fillStyle = gradient;\n    paletteCtx.fillRect(0, 0, 256, 1);\n\n    return paletteCtx.getImageData(0, 0, 256, 1).data;\n  };\n\n  var _getPointTemplate = function(radius, blurFactor) {\n    var tplCanvas = document.createElement('canvas');\n    var tplCtx = tplCanvas.getContext('2d');\n    var x = radius;\n    var y = radius;\n    tplCanvas.width = tplCanvas.height = radius*2;\n\n    if (blurFactor == 1) {\n      tplCtx.beginPath();\n      tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\n      tplCtx.fillStyle = 'rgba(0,0,0,1)';\n      tplCtx.fill();\n    } else {\n      var gradient = tplCtx.createRadialGradient(x, y, radius*blurFactor, x, y, radius);\n      gradient.addColorStop(0, 'rgba(0,0,0,1)');\n      gradient.addColorStop(1, 'rgba(0,0,0,0)');\n      tplCtx.fillStyle = gradient;\n      tplCtx.fillRect(0, 0, 2*radius, 2*radius);\n    }\n\n\n\n    return tplCanvas;\n  };\n\n  var _prepareData = function(data) {\n    var renderData = [];\n    var min = data.min;\n    var max = data.max;\n    var radi = data.radi;\n    var data = data.data;\n\n    var xValues = Object.keys(data);\n    var xValuesLen = xValues.length;\n\n    while(xValuesLen--) {\n      var xValue = xValues[xValuesLen];\n      var yValues = Object.keys(data[xValue]);\n      var yValuesLen = yValues.length;\n      while(yValuesLen--) {\n        var yValue = yValues[yValuesLen];\n        var value = data[xValue][yValue];\n        var radius = radi[xValue][yValue];\n        renderData.push({\n          x: xValue,\n          y: yValue,\n          value: value,\n          radius: radius\n        });\n      }\n    }\n\n    return {\n      min: min,\n      max: max,\n      data: renderData\n    };\n  };\n\n\n  function Canvas2dRenderer(config) {\n    var container = config.container;\n    var shadowCanvas = this.shadowCanvas = document.createElement('canvas');\n    var canvas = this.canvas = config.canvas || document.createElement('canvas');\n    var renderBoundaries = this._renderBoundaries = [10000, 10000, 0, 0];\n\n    var computed = getComputedStyle(config.container) || {};\n\n    canvas.className = 'heatmap-canvas';\n\n    this._width = canvas.width = shadowCanvas.width = config.width || +(computed.width.replace(/px/,''));\n    this._height = canvas.height = shadowCanvas.height = config.height || +(computed.height.replace(/px/,''));\n\n    this.shadowCtx = shadowCanvas.getContext('2d');\n    this.ctx = canvas.getContext('2d');\n\n    // @TODO:\n    // conditional wrapper\n\n    canvas.style.cssText = shadowCanvas.style.cssText = 'position:absolute;left:0;top:0;';\n\n    container.style.position = 'relative';\n    container.appendChild(canvas);\n\n    this._palette = _getColorPalette(config);\n    this._templates = {};\n\n    this._setStyles(config);\n  };\n\n  Canvas2dRenderer.prototype = {\n    renderPartial: function(data) {\n      if (data.data.length > 0) {\n        this._drawAlpha(data);\n        this._colorize();\n      }\n    },\n    renderAll: function(data) {\n      // reset render boundaries\n      this._clear();\n      if (data.data.length > 0) {\n        this._drawAlpha(_prepareData(data));\n        this._colorize();\n      }\n    },\n    _updateGradient: function(config) {\n      this._palette = _getColorPalette(config);\n    },\n    updateConfig: function(config) {\n      if (config['gradient']) {\n        this._updateGradient(config);\n      }\n      this._setStyles(config);\n    },\n    setDimensions: function(width, height) {\n      this._width = width;\n      this._height = height;\n      this.canvas.width = this.shadowCanvas.width = width;\n      this.canvas.height = this.shadowCanvas.height = height;\n    },\n    _clear: function() {\n      this.shadowCtx.clearRect(0, 0, this._width, this._height);\n      this.ctx.clearRect(0, 0, this._width, this._height);\n    },\n    _setStyles: function(config) {\n      this._blur = (config.blur == 0)?0:(config.blur || config.defaultBlur);\n\n      if (config.backgroundColor) {\n        this.canvas.style.backgroundColor = config.backgroundColor;\n      }\n\n      this._width = this.canvas.width = this.shadowCanvas.width = config.width || this._width;\n      this._height = this.canvas.height = this.shadowCanvas.height = config.height || this._height;\n\n\n      this._opacity = (config.opacity || 0) * 255;\n      this._maxOpacity = (config.maxOpacity || config.defaultMaxOpacity) * 255;\n      this._minOpacity = (config.minOpacity || config.defaultMinOpacity) * 255;\n      this._useGradientOpacity = !!config.useGradientOpacity;\n    },\n    _drawAlpha: function(data) {\n      var min = this._min = data.min;\n      var max = this._max = data.max;\n      var data = data.data || [];\n      var dataLen = data.length;\n      // on a point basis?\n      var blur = 1 - this._blur;\n\n      while(dataLen--) {\n\n        var point = data[dataLen];\n\n        var x = point.x;\n        var y = point.y;\n        var radius = point.radius;\n        // if value is bigger than max\n        // use max as value\n        var value = Math.min(point.value, max);\n        var rectX = x - radius;\n        var rectY = y - radius;\n        var shadowCtx = this.shadowCtx;\n\n\n\n\n        var tpl;\n        if (!this._templates[radius]) {\n          this._templates[radius] = tpl = _getPointTemplate(radius, blur);\n        } else {\n          tpl = this._templates[radius];\n        }\n        // value from minimum / value range\n        // => [0, 1]\n        var templateAlpha = (value-min)/(max-min);\n        // this fixes #176: small values are not visible because globalAlpha < .01 cannot be read from imageData\n        shadowCtx.globalAlpha = templateAlpha < .01 ? .01 : templateAlpha;\n\n        shadowCtx.drawImage(tpl, rectX, rectY);\n\n        // update renderBoundaries\n        if (rectX < this._renderBoundaries[0]) {\n            this._renderBoundaries[0] = rectX;\n          }\n          if (rectY < this._renderBoundaries[1]) {\n            this._renderBoundaries[1] = rectY;\n          }\n          if (rectX + 2*radius > this._renderBoundaries[2]) {\n            this._renderBoundaries[2] = rectX + 2*radius;\n          }\n          if (rectY + 2*radius > this._renderBoundaries[3]) {\n            this._renderBoundaries[3] = rectY + 2*radius;\n          }\n\n      }\n    },\n    _colorize: function() {\n      var x = this._renderBoundaries[0];\n      var y = this._renderBoundaries[1];\n      var width = this._renderBoundaries[2] - x;\n      var height = this._renderBoundaries[3] - y;\n      var maxWidth = this._width;\n      var maxHeight = this._height;\n      var opacity = this._opacity;\n      var maxOpacity = this._maxOpacity;\n      var minOpacity = this._minOpacity;\n      var useGradientOpacity = this._useGradientOpacity;\n\n      if (x < 0) {\n        x = 0;\n      }\n      if (y < 0) {\n        y = 0;\n      }\n      if (x + width > maxWidth) {\n        width = maxWidth - x;\n      }\n      if (y + height > maxHeight) {\n        height = maxHeight - y;\n      }\n\n      var img = this.shadowCtx.getImageData(x, y, width, height);\n      var imgData = img.data;\n      var len = imgData.length;\n      var palette = this._palette;\n\n\n      for (var i = 3; i < len; i+= 4) {\n        var alpha = imgData[i];\n        var offset = alpha * 4;\n\n\n        if (!offset) {\n          continue;\n        }\n\n        var finalAlpha;\n        if (opacity > 0) {\n          finalAlpha = opacity;\n        } else {\n          if (alpha < maxOpacity) {\n            if (alpha < minOpacity) {\n              finalAlpha = minOpacity;\n            } else {\n              finalAlpha = alpha;\n            }\n          } else {\n            finalAlpha = maxOpacity;\n          }\n        }\n\n        imgData[i-3] = palette[offset];\n        imgData[i-2] = palette[offset + 1];\n        imgData[i-1] = palette[offset + 2];\n        imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\n\n      }\n\n      img.data = imgData;\n      this.ctx.putImageData(img, x, y);\n\n      this._renderBoundaries = [1000, 1000, 0, 0];\n\n    },\n    getValueAt: function(point) {\n      var value;\n      var shadowCtx = this.shadowCtx;\n      var img = shadowCtx.getImageData(point.x, point.y, 1, 1);\n      var data = img.data[3];\n      var max = this._max;\n      var min = this._min;\n\n      value = (Math.abs(max-min) * (data/255)) >> 0;\n\n      return value;\n    },\n    getDataURL: function() {\n      return this.canvas.toDataURL();\n    }\n  };\n\n\n  return Canvas2dRenderer;\n})();\n\n\nvar Renderer = (function RendererClosure() {\n\n  var rendererFn = false;\n\n  if (HeatmapConfig['defaultRenderer'] === 'canvas2d') {\n    rendererFn = Canvas2dRenderer;\n  }\n\n  return rendererFn;\n})();\n\n\nvar Util = {\n  merge: function() {\n    var merged = {};\n    var argsLen = arguments.length;\n    for (var i = 0; i < argsLen; i++) {\n      var obj = arguments[i]\n      for (var key in obj) {\n        merged[key] = obj[key];\n      }\n    }\n    return merged;\n  }\n};\n// Heatmap Constructor\nvar Heatmap = (function HeatmapClosure() {\n\n  var Coordinator = (function CoordinatorClosure() {\n\n    function Coordinator() {\n      this.cStore = {};\n    };\n\n    Coordinator.prototype = {\n      on: function(evtName, callback, scope) {\n        var cStore = this.cStore;\n\n        if (!cStore[evtName]) {\n          cStore[evtName] = [];\n        }\n        cStore[evtName].push((function(data) {\n            return callback.call(scope, data);\n        }));\n      },\n      emit: function(evtName, data) {\n        var cStore = this.cStore;\n        if (cStore[evtName]) {\n          var len = cStore[evtName].length;\n          for (var i=0; i<len; i++) {\n            var callback = cStore[evtName][i];\n            callback(data);\n          }\n        }\n      }\n    };\n\n    return Coordinator;\n  })();\n\n\n  var _connect = function(scope) {\n    var renderer = scope._renderer;\n    var coordinator = scope._coordinator;\n    var store = scope._store;\n\n    coordinator.on('renderpartial', renderer.renderPartial, renderer);\n    coordinator.on('renderall', renderer.renderAll, renderer);\n    coordinator.on('extremachange', function(data) {\n      scope._config.onExtremaChange &&\n      scope._config.onExtremaChange({\n        min: data.min,\n        max: data.max,\n        gradient: scope._config['gradient'] || scope._config['defaultGradient']\n      });\n    });\n    store.setCoordinator(coordinator);\n  };\n\n\n  function Heatmap() {\n    var config = this._config = Util.merge(HeatmapConfig, arguments[0] || {});\n    this._coordinator = new Coordinator();\n    if (config['plugin']) {\n      var pluginToLoad = config['plugin'];\n      if (!HeatmapConfig.plugins[pluginToLoad]) {\n        throw new Error('Plugin \\''+ pluginToLoad + '\\' not found. Maybe it was not registered.');\n      } else {\n        var plugin = HeatmapConfig.plugins[pluginToLoad];\n        // set plugin renderer and store\n        this._renderer = new plugin.renderer(config);\n        this._store = new plugin.store(config);\n      }\n    } else {\n      this._renderer = new Renderer(config);\n      this._store = new Store(config);\n    }\n    _connect(this);\n  };\n\n  // @TODO:\n  // add API documentation\n  Heatmap.prototype = {\n    addData: function() {\n      this._store.addData.apply(this._store, arguments);\n      return this;\n    },\n    removeData: function() {\n      this._store.removeData && this._store.removeData.apply(this._store, arguments);\n      return this;\n    },\n    setData: function() {\n      this._store.setData.apply(this._store, arguments);\n      return this;\n    },\n    setDataMax: function() {\n      this._store.setDataMax.apply(this._store, arguments);\n      return this;\n    },\n    setDataMin: function() {\n      this._store.setDataMin.apply(this._store, arguments);\n      return this;\n    },\n    configure: function(config) {\n      this._config = Util.merge(this._config, config);\n      this._renderer.updateConfig(this._config);\n      this._coordinator.emit('renderall', this._store._getInternalData());\n      return this;\n    },\n    repaint: function() {\n      this._coordinator.emit('renderall', this._store._getInternalData());\n      return this;\n    },\n    getData: function() {\n      return this._store.getData();\n    },\n    getDataURL: function() {\n      return this._renderer.getDataURL();\n    },\n    getValueAt: function(point) {\n\n      if (this._store.getValueAt) {\n        return this._store.getValueAt(point);\n      } else  if (this._renderer.getValueAt) {\n        return this._renderer.getValueAt(point);\n      } else {\n        return null;\n      }\n    }\n  };\n\n  return Heatmap;\n\n})();\n\n\n// core\nvar heatmapFactory = {\n  create: function(config) {\n    return new Heatmap(config);\n  },\n  register: function(pluginKey, plugin) {\n    HeatmapConfig.plugins[pluginKey] = plugin;\n  }\n};\n\nreturn heatmapFactory;\n\n\n});"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}